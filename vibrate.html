<!doctype html>

<head>
	
	<meta charset="utf-8"/>
	<meta name="HandheldFriendly" content="true" />
	<meta name="MobileOptimized" content="320"/>
 	<meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Home - ESPN</title>
	<link href="vendor/bootstrap-2.2.2/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link rel='stylesheet' href='css/common.css'>
	<script src="vendor/js/handlebars-1.0.rc.1.js" type="text/javascript"></script>
	<script type="text/javascript" src="vendor/jquery-1.8.3.min.js"></script>
	<script src="vendor/js/jquery.pubsub.js" type="text/javascript"></script>
	<script src="js/common.js" type="text/javascript"></script>
	<script src="js/scoreUpdater.js" type="text/javascript"></script>
</head>

<body class="ncaa">

<script>
$(document).ready(function() {

	$.subscribe("/score/update", function( e, data ) {
		
	  if( espnAlerts.getAlertsEnabled() ){
		  team = espnAlerts.getTeam( data )
		  console.log( "team:" + team )
		  //Check if Tie, only buzz one second
		  if( team == 0 ){
		  		espnAlerts.doVibrate( [1000] )
		  }else{ 
			  if( team == 1 ){
			  	espnAlerts.doVibrate( [100] )
			  }else if( team == 2 ){
			  	espnAlerts.doVibrate( [100, 100] )
			  }
		 
			  setTimeout( function(){	
					espnAlerts.doVibrate( [ espnAlerts.getScore( data ) ])
				}, 1000 )
		 }
	}
	  
	});

	$.subscribe("/score/firstTime", function( e, competition ) {
		for( var x = 0; x <= competition.competitors.length - 1; x++ ){
			team = competition.competitors[x].team;
			teamName = team.location + " " + team.name;
			if( team.homeAway == "home"){
				el = $("#team-instructions-home");
			}else{
				el = $("#team-instructions-away");
			}
			el.html( teamName);
		}
	});

	$.subscribe("/score/periodChange", function( e, obj ) {
		console.log("PERIOD CHANGE");
		console.log( obj )
	});
	
	$("#alerts-toggle").click(function() {
		espnAlerts.toggleAlerts();

		$("#alerts-toggle").toggleClass("btn-danger").toggleClass("btn-success");
  
		$("#alerts-toggle").html( ( ( $("#alerts-toggle").html() == "Stop" ) ? "Start": "Stop" ) )
	});
});

</script>

<div id="header" style="height:72px;"></div>
<div style="clear:both;margin-bottom:15px;"></div>

<img src="images/dockers.png">

<div class="instructions">
<div class="team-instructions">
	<h5>Team Prefix</h5>
	<div id="team-instructions-away"></div>
	<div id="team-instructions-home"></div>
</div>



<div class="score-instructions score-instructions-basketball">
<div class="alert alert-success">Alert every 10 seconds of the Game Time</div>

<div>1 Second = 0-5 point lead</div>
<div>2 Seconds = 6-10 point lead</div>
<div>3 Seconds = > 10 point lead</div>
</div>
</div>
<button type="button" class="btn btn-large btn-danger" id="alerts-toggle">Stop</button>

</body>